تم<!-- index.html --><!DOCTYPE html><html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>منصة المحاضرات</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>
<body>
  <header>
    <h1>منصة المحاضرات</h1>
  </header>
  <main>
    <section id="lectures-list">
      <!-- قائمة المحاضرات -->
    </section>
    <section id="player">
      <video id="video" controls></video>
    </section>
  </main>
  <script src="script.js"></script>
</body>
</html>/* style.css */ body { font-family: sans-serif; margin: 0; padding: 0; direction: rtl; }

header { background: #0055a5; color: #fff; padding: 1rem; text-align: center; }

main { display: flex; flex-direction: row; gap: 1rem; padding: 1rem; }

#lectures-list { flex: 1; max-width: 300px; }

.lecture-item { background: #f1f1f1; margin-bottom: 0.5rem; padding: 0.75rem; cursor: pointer; border-radius: 4px; transition: background 0.3s; }

.lecture-item:hover { background: #e3e3e3; }

#player { flex: 2; }

video { width: 100%; max-height: 80vh; background: black; }

// script.js const PROXY_BASE = 'https://proxy-abwaab123.ss9758026.workers.dev/?url=';

const lectures = [ { title: 'محاضرة تجريبية', url: 'https://vz-99e5c202-ca5.b-cdn.net/7f2873a8-c450-4db3-819a-1cfc518c23f8/1080p/video.m3u8' } ];

lectures.forEach(lec => { const div = document.createElement('div'); div.className = 'lecture-item'; div.textContent = lec.title; div.onclick = () => playLecture(lec.url); document.getElementById('lectures-list').appendChild(div); });

function playLecture(originalUrl) { const videoEl = document.getElementById('video'); const proxiedUrl = PROXY_BASE + encodeURIComponent(originalUrl);

if (window.hls) { window.hls.destroy(); }

if (Hls.isSupported()) { window.hls = new Hls({ xhrSetup: function(xhr, url) { const proxied = PROXY_BASE + encodeURIComponent(url); xhr.open('GET', proxied, true); } });

window.hls.loadSource(proxiedUrl);
window.hls.attachMedia(videoEl);
window.hls.on(Hls.Events.MANIFEST_PARSED, () => {
  videoEl.play();
});

window.hls.on(Hls.Events.ERROR, function (event, data) {
  console.error('HLS.js error', data);
});

} else if (videoEl.canPlayType('application/vnd.apple.mpegurl')) { videoEl.src = proxiedUrl; videoEl.play(); } else { alert('HLS غير مدعوم في هذا المتصفح'); } }

// cloudflare-worker.js addEventListener('fetch', event => { event.respondWith(handleRequest(event.request)); });

async function handleRequest(request) { const url = new URL(request.url); const target = url.searchParams.get('url');

if (!target) { return new Response('Missing url parameter', { status: 400 }); }

try { const proxiedResponse = await fetch(target, { headers: { 'Referer': 'https://vz-99e5c202-ca5.b-cdn.net/', 'Origin': 'https://vz-99e5c202-ca5.b-cdn.net/', } });

const newHeaders = new Headers(proxiedResponse.headers);
newHeaders.set('Access-Control-Allow-Origin', '*');
newHeaders.set('Access-Control-Allow-Methods', 'GET, OPTIONS');
newHeaders.set('Access-Control-Allow-Headers', '*');
newHeaders.set('Access-Control-Expose-Headers', '*');

return new Response(proxiedResponse.body, {
  status: proxiedResponse.status,
  headers: newHeaders
});

} catch (err) { return new Response('Proxy Error: ' + err.message, { status: 502 }); } }

